<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta name="color-scheme" content="dark">
  <title>REPLYZEAI - Answer Every Open House Lead in 60 Seconds</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <style>
    /* Core Animations */
    @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    @keyframes floatElement { 0%,100%{transform:translateY(0)rotate(0deg);}50%{transform:translateY(-20px)rotate(3deg);} }
    @keyframes pulse { 0%{box-shadow:0 0 0 0 rgba(247,37,133,0.4);}70%{box-shadow:0 0 0 12px rgba(247,37,133,0);}100%{box-shadow:0 0 0 0 rgba(247,37,133,0);} }
    @keyframes slideDown { from{transform:translateY(-100%);}to{transform:translateY(0);} }
    @keyframes slideIn { from{transform:translateX(-100%);}to{transform:translateX(0);} }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* Base Styles */
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
    body{background:linear-gradient(-45deg,#0a192f,#112240,#1a2f4b,#233554);background-size:400% 400%;animation:gradientBG 25s ease infinite;color:#fff;overflow-x:hidden;}
    .progress-bar{height:4px;background:#64ffda;position:fixed;top:0;left:0;z-index:10000;transition:width .4s cubic-bezier(.22,.61,.36,1);width:0%;}

    /* Navigation - Enhanced for Mobile */
    .nav{padding:1rem 5%;display:flex;justify-content:space-between;align-items:center;background:rgba(10,25,47,.95);backdrop-filter:blur(15px);position:fixed;width:100%;z-index:1000;transform:translateY(-100%);animation:slideDown .8s cubic-bezier(.23,1,.32,1) forwards;border-bottom:1px solid rgba(100,255,218,.1);}    
    .logo{font-size:1.8rem;font-weight:700;background:linear-gradient(45deg,#64ffda,#8affdf);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 25px rgba(100,255,218,.3);letter-spacing:-.5px;}
    .nav-links{display:flex;gap:1.5rem;}
    .nav-links a{color:#8892b0;text-decoration:none;font-weight:500;transition:all .3s;position:relative;}
    .nav-links a:hover{color:#64ffda;}
    .cta-button{display:inline-flex;align-items:center;justify-content:center;padding:.9rem 1.8rem;border-radius:50px;font-weight:700;text-decoration:none;transition:all .4s;position:relative;overflow:hidden;border:2px solid #64ffda;background:linear-gradient(135deg,#64ffda 0%,#52d1b8 100%);color:#0a192f;box-shadow:0 4px 25px rgba(100,255,218,.3);font-size:1rem;cursor:pointer;}
    .cta-button:hover{transform:translateY(-2px);box-shadow:0 6px 30px rgba(100,255,218,.5);}

    /* Mobile Menu - FIXED */
    .mobile-menu-btn {display: none; background: none; border: none; color: #8892b0; font-size: 1.5rem; cursor: pointer; z-index: 1001;}
    .mobile-nav {display: flex; position: fixed; top: 0; left: 0; width: 80%; max-width: 300px; height: 100vh; background: rgba(10,25,47,0.98); backdrop-filter: blur(15px); padding: 5rem 1.5rem 2rem; flex-direction: column; z-index: 999; transform: translateX(-100%); transition: transform 0.3s ease; box-shadow: 2px 0 10px rgba(0,0,0,0.3);}
    .mobile-nav a {color: #8892b0; text-decoration: none; padding: 1rem 0; font-weight: 500; transition: color 0.3s; font-size: 1.1rem; border-bottom: 1px solid rgba(100,255,218,0.1);}
    .mobile-nav a:hover {color: #64ffda;}
    .mobile-nav.active {transform: translateX(0); animation: slideIn 0.3s ease;}
    
    /* Mobile menu overlay */
    .mobile-overlay {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 998;}
    .mobile-overlay.active {display: block;}

    /* Hero Section */
    .hero{padding:10rem 5% 4rem;text-align:center;position:relative;overflow:hidden;min-height:auto;display:flex;flex-direction:column;justify-content:center;align-items:center;}
    .hero h1{font-size:2.5rem;margin-bottom:1.2rem;line-height:1.2;max-width:900px;background:linear-gradient(45deg,#64ffda,#8affdf);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 25px rgba(100,255,218,.3);}
    .hero-subhead{font-size:1.2rem;color:#8892b0;margin-bottom:2.5rem;max-width:700px;line-height:1.6;font-weight:400;}

    /* Interactive Demo Section */
    .interactive-demo {padding:3rem 5%;background:rgba(10,25,47,0.4);}    
    .demo-container {background:rgba(16,36,64,0.8);border-radius:15px;padding:1.5rem;border:1px solid rgba(100,255,218,0.2);margin:1.5rem auto;max-width:800px;}
    .demo-header {display:flex;flex-direction:column;gap:0.5rem;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid rgba(100,255,218,0.1);}
    .demo-title {font-size: 1.2rem; font-weight: 600; color: #ccd6f6;}
    .demo-input {width:100%;min-height:120px;background:rgba(10,25,47,0.7);border:1px solid rgba(100,255,218,0.3);border-radius:8px;padding:1.2rem;color:#fff;margin-bottom:1.5rem;font-size:1rem;resize:vertical;font-family: inherit;}
    .demo-input:focus {outline: none; border-color: #64ffda;}

    /* Trial Counter */
    .trial-counter{background:rgba(100,255,218,0.1);border-radius:50px;padding:.7rem 1.2rem;display:inline-flex;align-items:center;gap:.6rem;margin-bottom:1.5rem;font-size:0.9rem;border:1px solid rgba(100,255,218,0.2);}
    .counter-number{font-weight:700;color:#64ffda;font-size:1.1rem;}

    /* Response Container */
    .response-container {display:none;max-width:800px;margin:1.5rem auto 0;}
    .response-content {background:rgba(10,25,47,0.7);border-radius:8px;padding:1.2rem;color:#8892b0;line-height:1.6;border:1px solid rgba(100,255,218,0.2);}    

    /* Template Examples Section */
.template-section {margin: 2rem 0; animation: fadeIn 0.8s ease;}
.template-title {font-size: 1.2rem; color: #ccd6f6; margin-bottom: 1rem; text-align: center;}
.template-grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;}
.template-card {background: rgba(10,25,47,0.7); border-radius: 8px; padding: 1.2rem; border: 1px solid rgba(100,255,218,0.2); cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden;}
.template-card:hover {transform: translateY(-5px); border-color: #64ffda; box-shadow: 0 8px 20px rgba(100,255,218,0.15);}
.template-card::before {content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 0; background: #64ffda; transition: height 0.3s ease;}
.template-card:hover::before {height: 100%;}
.template-lead {color: #8892b0; font-size: 0.9rem; margin-bottom: 0.8rem; font-style: italic; position: relative; padding-left: 2rem;} /* Adjusted padding */
.template-lead::before {content: '“'; position: absolute; left: 1rem; top: -5px; color: #64ffda; font-size: 1.2rem;} /* Adjusted left position */
.template-response {color: #64ffda; font-size: 0.95rem; line-height: 1.4; position: relative; padding-left: 4.5rem;} /* Adjusted padding */
.template-response::before {content: 'REPLYZEAI:'; position: absolute; left: 1rem; top: 0; color: #8affdf; font-size: 0.8rem; font-weight: bold;} /* Adjusted left position */
.template-badge {position: absolute; top: 10px; right: 10px; background: rgba(100,255,218,0.1); color: #64ffda; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600;}

    /* Trial Section */
    .trial-section {padding:3rem 5%;background:rgba(10,25,47,0.6);}    
    .trial-card {background:rgba(16,36,64,0.8);border-radius:15px;padding:2rem;border:1px solid rgba(100,255,218,0.2);}    
    .form-group {margin-bottom: 1.2rem;}
    .form-group label {display: block; margin-bottom: 0.5rem; color: #ccd6f6; font-weight: 500;}
    .form-group input {width:100%;padding:1rem;border-radius:8px;border:1px solid rgba(100,255,218,0.3);background:rgba(10,25,47,0.7);color:#fff;font-size:1rem;font-family: inherit;}
    .form-group input:focus {outline: none; border-color: #64ffda;}
    .form-message {padding: 0.8rem; border-radius: 8px; margin-bottom: 1rem; display: none;}
    .form-message.success {background: rgba(0,202,78,0.2); border: 1px solid rgba(0,202,78,0.3); color: #00ca4e;}
    .form-message.error {background: rgba(255,96,92,0.2); border: 1px solid rgba(255,96,92,0.3); color: #ff605c;}

    /* Modal */
    .modal {display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background-color:rgba(10,25,47,0.95);}    
    .modal-content {background-color:rgba(16,36,64,0.95);margin:15% auto;padding:1.5rem;border:1px solid rgba(100,255,218,0.3);border-radius:15px;width:90%;max-width:500px;position:relative;}
    .close-modal {position: absolute; top: 1rem; right: 1.5rem; color: #8892b0; font-size: 1.5rem; cursor: pointer;}
    .close-modal:hover {color: #64ffda;}

    /* Toast */
    #replyze-toast {position:fixed;bottom:20px;left:50%;transform:translateX(-50%);z-index:9999;display:none;padding:12px 18px;border-radius:8px;background:rgba(10,25,47,0.95);color:#fff;box-shadow:0 6px 20px rgba(0,0,0,0.5);font-weight:600;}

    /* Urgency Banner */
    .urgency-banner-updated {background:linear-gradient(90deg,#f72585 0%,#b5179e 100%);padding:10px 0;text-align:center;font-weight:600;position:fixed;width:100%;top:0;z-index:1001;}

    /* Mobile-specific optimizations */
    @media (max-width: 768px) {
      body {
        font-size: 16px; /* Prevents zoom on iOS when focusing inputs */
      }
      
      .nav-links {display: none;}      
      .mobile-menu-btn {display: block;}
      .hero {padding: 12rem 5% 3rem; min-height: 80vh;}
      .hero h1 {font-size: 2rem; line-height: 1.3; padding: 0 1rem;}
      .hero-subhead {font-size: 1.1rem; padding: 0 1rem;}
      .nav {padding: 1rem;}
      
      /* Improved mobile navigation */
      .mobile-nav a {
        padding: 1rem 0;
      }
      
      /* Mobile-optimized buttons */
      .cta-button {
        padding: 1rem 1.5rem;
        font-size: 1rem;
        min-height: 54px; /* Better touch target */
      }
      
      /* Demo section improvements */
      .demo-container {
        padding: 1.2rem;
        margin: 1rem 0;
      }
      
      .demo-input {
        min-height: 100px;
        padding: 1rem;
      }
      
      /* Template section improvements */
      .template-grid {
        grid-template-columns: 1fr;
      }
      
      /* Trial section improvements */
      .trial-card {
        padding: 1.5rem;
      }
      
      /* Form improvements */
      .form-group input {
        padding: 0.9rem;
        font-size: 16px; /* Prevents iOS zoom */
      }
      
      /* Improved spacing for mobile */
      .interactive-demo, .trial-section {
        padding: 2rem 5%;
      }
      
      /* Better text contrast for mobile */
      .demo-title, .form-group label {
        font-size: 1.1rem;
      }
      
      /* Fixed header height adjustment */
      .nav {
        position: fixed;
        top: 40px; /* Height of urgency banner */
      }
      
      /* Ensure content doesn't get hidden behind fixed header */
      .hero {
        padding-top: calc(40px + 70px + 4rem); /* Urgency banner + nav height + spacing */
      }
    }

    /* Additional small screen optimizations */
    @media (max-width: 480px) {
      .hero h1 {
        font-size: 1.8rem;
      }
      
      .hero-subhead {
        font-size: 1rem;
      }
      
      .trial-counter {
        font-size: 0.8rem;
        padding: 0.6rem 1rem;
      }
      
      .counter-number {
        font-size: 1rem;
      }
      
      /* Better spacing for very small screens */
      .interactive-demo h2, .trial-section h2 {
        font-size: 1.6rem !important;
        line-height: 1.3;
      }
      
      .hero {
        padding-top: calc(40px + 60px + 3rem); /* Smaller nav height on very small screens */
      }
      
      .template-card {
        padding: 1rem;
      }
    }

    /* Dark mode optimizations */
    @media (prefers-color-scheme: dark) {
      /* Ensure text contrast is maintained in dark mode */
      .hero-subhead, .nav-links a, .mobile-nav a, .demo-title, 
      .form-group label, .response-content, .close-modal {
        color: #ccd6f6 !important;
      }
      
      /* Slightly brighter secondary text for better readability */
      .hero-subhead strong, .demo-input::placeholder {
        color: #a8b2d1 !important;
      }
      
      /* Enhance borders for better visibility */
      .demo-container, .trial-card, .demo-input, .response-content,
      .form-group input, .modal-content {
        border-color: rgba(100,255,218,0.25) !important;
      }
    }

    /* Prevent horizontal scrolling on mobile */
    html, body {
      max-width: 100%;
      overflow-x: hidden;
    }

    /* Improved focus states for accessibility */
    .cta-button:focus, .demo-input:focus, .form-group input:focus,
    .mobile-menu-btn:focus {
      outline: 2px solid #64ffda;
      outline-offset: 2px;
    }

    /* Safe area insets for notched phones */
    @supports(padding: max(0px)) {
      .nav, .urgency-banner-updated {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
      }
      
      .hero, .interactive-demo, .trial-section {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
      }
      
      .urgency-banner-updated {
        padding-top: env(safe-area-inset-top);
        height: calc(40px + env(safe-area-inset-top));
      }
      
      .nav {
        top: calc(40px + env(safe-area-inset-top));
      }
      
      .hero {
        padding-top: calc(40px + 70px + 4rem + env(safe-area-inset-top));
      }
      
      .mobile-nav {
        padding-top: calc(5rem + env(safe-area-inset-top));
      }
    }
  </style>
</head>
<body>
  <div class="progress-bar" id="progressBar"></div>

  <!-- Toast for non-blocking messages -->
  <div id="replyze-toast" role="status" aria-live="polite"></div>

  <!-- Updated Urgency Banner -->
  <div class="urgency-banner-updated">
    <span>⏰ Personal Onboarding: <strong>2</strong> spots left this week — booked weekly, limited capacity.</span>
  </div>

  <nav class="nav">
    <div class="logo">REPLYZEAI</div>
    <div class="nav-links">
      <a href="#how-it-works">How It Works</a>
      <a href="#proof">Proof</a>
      <a href="#trial">Free Trial</a>
      <a href="#testimonials">Testimonials</a>
    </div>
    <a class="cta-button" href="#trial">Get My Free Trial Now</a>
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
      <i class="fas fa-bars"></i>
    </button>
  </nav>

  <!-- Mobile Navigation - FIXED -->
  <div class="mobile-overlay" id="mobileOverlay"></div>
  <div class="mobile-nav" id="mobileNav">
    <a href="#how-it-works" onclick="closeMobileMenu()">How It Works</a>
    <a href="#proof" onclick="closeMobileMenu()">Proof</a>
    <a href="#trial" onclick="closeMobileMenu()">Free Trial</a>
    <a href="#testimonials" onclick="closeMobileMenu()">Testimonials</a>
    <a class="cta-button" href="#trial" style="margin-top:1.5rem;justify-content:center;" onclick="closeMobileMenu()">Get My Free Trial Now</a>
  </div>

  <section class="hero">
    <h1>Stop Losing Open House Leads to Faster Agents</h1>
    <p class="hero-subhead">REPLYZEAI helps solo agents respond to <strong>every lead in 60 seconds</strong> — turning more "maybe's" into booked appointments while you focus on closings.</p>
    <a class="cta-button" href="#demo"><i class="fas fa-robot"></i> See How It Works For Your Business</a>
  </section>

  <section class="interactive-demo" id="demo">
    <h2 style="font-size:2rem;color:#64ffda;margin-bottom:1.2rem;text-align:center;">See Exactly How REPLYZEAI Works For YOUR Leads</h2>
    <p style="text-align:center;color:#8892b0;max-width:800px;margin:0 auto 2rem;line-height:1.6;">Tired of leads going cold while you're busy? See how our AI captures and converts leads in real-time.</p>

    <!-- Enhanced Template Examples Section -->
    <div class="template-section">
      <h3 class="template-title">Try These Common Real Estate Scenarios</h3>
      <div class="template-grid">
        <div class="template-card" onclick="useTemplate(0)">
          <span class="template-badge">Open House</span>
          <div class="template-lead">"Hi, I saw your sign at 123 Elm St. Is the open house still this Sunday? What time? - Jennifer"</div>
          <div class="template-response">Hi Jennifer! Thanks for reaching out about our open house at 123 Elm St. Yes, it's still happening this Sunday from 1-4 PM. Would you like me to save you a spot or would a different time work better for you?</div>
        </div>
        <div class="template-card" onclick="useTemplate(1)">
          <span class="template-badge">Drive-by</span>
          <div class="template-lead">"Just drove by your listing on Oak Ave. Are you doing any showings this weekend? - Mark"</div>
          <div class="template-response">Hello Mark! Thanks for your interest in our Oak Ave property. We have showings available both Saturday and Sunday. What time would work best for you to take a tour?</div>
        </div>
        <div class="template-card" onclick="useTemplate(2)">
          <span class="template-badge">Info Request</span>
          <div class="template-lead">"Interested in the open house tomorrow. Can you send me more info? - Sarah"</div>
          <div class="template-response">Hi Sarah! I'd be happy to provide more information about tomorrow's open house. The property features 3 bedrooms, 2 bathrooms, and a newly renovated kitchen. What specific details are you most interested in?</div>
        </div>
        <div class="template-card" onclick="useTemplate(3)">
          <span class="template-badge">Price Question</span>
          <div class="template-lead">"What's the asking price for the property on Maple Road? Is it negotiable? - Robert"</div>
          <div class="template-response">Hi Robert! The asking price for the Maple Road property is $589,000. I'd be happy to discuss the pricing and comparable properties in the area. Would you like to schedule a time to see the home in person?</div>
        </div>
        <div class="template-card" onclick="useTemplate(4)">
          <span class="template-badge">Scheduling</span>
          <div class="template-lead">"I can't make the open house hours. Can we schedule a private showing? - Michelle"</div>
          <div class="template-response">Hi Michelle! Absolutely, I'd be happy to arrange a private showing for you. What days and times typically work best for your schedule? I'll check my availability and get something set up.</div>
        </div>
        <div class="template-card" onclick="useTemplate(5)">
          <span class="template-badge">Property Details</span>
          <div class="template-lead">"Does the home on Pine Street have a finished basement? How old is the roof? - David"</div>
          <div class="template-response">Hi David! Great questions. The Pine Street home does have a partially finished basement, and the roof was replaced approximately 3 years ago. Would you like me to send you the full property details sheet with all the specifics?</div>
        </div>
      </div>
    </div>

    <div class="demo-container">
      <div class="demo-header">
        <div class="demo-title">1. Paste Your Last Lead Message Here</div>
        <div style="color: #64ffda; font-size: 0.9rem;">Watch REPLYZEAI craft the perfect response</div>
      </div>

      <div class="trial-counter"><i class="fas fa-gift"></i> <strong>FREE DEMO:</strong> <span class="counter-number" id="ai-counter">loading…</span></div>

      <textarea class="demo-input" id="demo-input" placeholder="Paste a lead message here..." aria-label="Lead message input">Hi, I saw your sign at 123 Elm St. Is the open house still this Sunday? What time? - Jennifer</textarea>
      <button class="cta-button" style="width:100%;" id="generate-btn"><i class="fas fa-robot"></i> See My AI Response Now</button>

      <div class="response-container" id="response-container">
        <div class="demo-header" style="margin-top:1rem;">
          <div class="demo-title">2. Your Personalized AI Response</div>
          <div style="color: #64ffda; font-size: 0.9rem;">Proven to increase appointments by 42%</div>
        </div>
        <div class="response-content"><div id="ai-response">Generating your response...</div></div>
        <div style="display:flex;flex-direction:column;gap:10px;margin-top:1.5rem;">
          <button class="cta-button" id="copy-btn" style="width:100%;"><i class="fas fa-copy"></i> Copy & Use This Response</button>
          <button class="cta-button" id="trial-cta" style="width:100%;" onclick="document.querySelector('#trial').scrollIntoView({behavior:'smooth'})"><i class="fas fa-rocket"></i> Get Your FREE 30-Day Trial</button>
        </div>
      </div>
    </div>
  </section>

  <section class="trial-section" id="trial">
    <div class="trial-container">
      <h2 style="font-size:2rem;color:#64ffda;margin-bottom:1rem;text-align:center;">Ready to Stop Losing Leads to Faster Agents?</h2>
      <p style="color:#8892b0;max-width:600px;margin:0 auto 2rem;line-height:1.6;text-align:center;">Join 3,247+ agents who booked <strong>17+ more appointments per month</strong> without hiring additional staff.</p>

      <div class="trial-card">
        <div style="display:flex;flex-direction:column;gap:1.2rem;margin-bottom:1.5rem;">
          <div>
            <h3 style="color:#64ffda;margin-bottom:0.6rem;">You'll Get REAL Results:</h3>
            <ul style="color:#8892b0;list-style-type:none;padding-left:0;margin:0;">
              <li style="margin-bottom:0.5rem;"><i class="fas fa-check" style="color:#64ffda;margin-right:0.5rem;"></i><strong>Convert 40% more leads</strong> into appointments</li>
              <li style="margin-bottom:0.5rem;"><i class="fas fa-check" style="color:#64ffda;margin-right:0.5rem;"></i><strong>Save 3+ hours daily</strong> on lead follow-up</li>
            </ul>
          </div>
        </div>

        <!-- Email-only signup (magic link) -->
        <form class="trial-form" id="trial-form">
          <div id="form-message" class="form-message"></div>

          <div class="form-group">
            <label for="name">Your Name (optional)</label>
            <input type="text" id="name" placeholder="What should we call you?">
          </div>

          <div class="form-group">
            <label for="email">Your Best Email</label>
            <input type="email" id="email" placeholder="Where should we send your login?" required>
          </div>

          <button class="cta-button" style="width:100%;padding:1.2rem;margin-top:1rem;" type="submit" id="signup-button"><i class="fas fa-rocket"></i> Start My FREE 30-Day Trial (No CC)</button>
          <p style="color:#8892b0;font-size:0.9rem;margin-top:1rem;text-align:center;"><strong>No credit card required</strong> • Join 3,247+ agents • Cancel anytime</p>
        </form>
      </div>
    </div>
  </section>

  <!-- Email Capture Modal (for script download) -->
  <div id="email-modal" class="modal">
    <div class="modal-content"><span class="close-modal" onclick="closeModal()">&times;</span>
      <h2 style="color:#64ffda;margin-bottom:1rem;">Get Your Free Script Guide</h2>
      <p style="color:#8892b0;margin-bottom:1rem;">Enter your email to download the complete Two-Line RSVP script guide.</p>
      <form id="email-form">
        <div class="form-group"><label for="modal-email">Email Address</label><input type="email" id="modal-email" placeholder="Your email address" required></div>
        <button class="cta-button" style="width:100%;" type="submit"><i class="fas fa-download"></i> Download Now</button>
      </form>
    </div>
  </div>

  <!-- Include Supabase JS -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <script>
    // -----------------------------
    // Template examples data - Expanded with more scenarios
    // -----------------------------
    const templateExamples = [
      {
        lead: "Hi, I saw your sign at 123 Elm St. Is the open house still this Sunday? What time? - Jennifer",
        response: "Hi Jennifer! Thanks for reaching out about our open house at 123 Elm St. Yes, it's still happening this Sunday from 1-4 PM. Would you like me to save you a spot or would a different time work better for you?"
      },
      {
        lead: "Just drove by your listing on Oak Ave. Are you doing any showings this weekend? - Mark",
        response: "Hello Mark! Thanks for your interest in our Oak Ave property. We have showings available both Saturday and Sunday. What time would work best for you to take a tour? I'd be happy to schedule that for you."
      },
      {
        lead: "Interested in the open house tomorrow. Can you send me more info? - Sarah",
        response: "Hi Sarah! I'd be happy to provide more information about tomorrow's open house. The property features 3 bedrooms, 2 bathrooms, and a newly renovated kitchen. It's priced at $589,000. What specific details are you most interested in learning about?"
      },
      {
        lead: "What's the asking price for the property on Maple Road? Is it negotiable? - Robert",
        response: "Hi Robert! The asking price for the Maple Road property is $589,000. I'd be happy to discuss the pricing and show you comparable properties in the area. Would you like to schedule a time to see the home in person?"
      },
      {
        lead: "I can't make the open house hours. Can we schedule a private showing? - Michelle",
        response: "Hi Michelle! Absolutely, I'd be happy to arrange a private showing for you. What days and times typically work best for your schedule? I'll check my availability and get something set up."
      },
      {
        lead: "Does the home on Pine Street have a finished basement? How old is the roof? - David",
        response: "Hi David! Great questions. The Pine Street home does have a partially finished basement, and the roof was replaced approximately 3 years ago. Would you like me to send you the full property details sheet with all the specifics?"
      }
    ];

    // -----------------------------
    // Function to use template examples
    // -----------------------------
    function useTemplate(index) {
      const example = templateExamples[index];
      const demoInput = document.getElementById('demo-input');
      const aiResponse = document.getElementById('ai-response');
      const responseContainer = document.getElementById('response-container');
      
      demoInput.value = example.lead;
      aiResponse.textContent = example.response;
      responseContainer.style.display = 'block';
      
      // Scroll to response
      setTimeout(() => {
        responseContainer.scrollIntoView({ 
          behavior: 'smooth', 
          block: 'start' 
        });
      }, 100);
      
      trackEvent('template_used', { template_id: index });
    }

    // -----------------------------
    // Supabase Configuration
    // -----------------------------
    let supabaseClient;
    
    function initializeSupabase() {
      // Replace these with your actual Supabase credentials
      const SUPABASE_URL = 'https://skxzfkudduqrubtgtodp.supabase.co';
      const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhbmFzZSIsInJlZiI6InNreHpma3VkZHVxcnVidGd0b2RwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU1ODAwNzMsImV4cCI6MjA2MTE1NjA3M30.Wj3V5-swysAz8xAbA4lKmo-NNu_mv1UW_X4BgFNq0ag';
      
      // Initialize Supabase client with proper auth configuration
      supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
        auth: {
          autoRefreshToken: true,
          persistSession: true,
          detectSessionInUrl: true,
          flowType: 'pkce',
          redirectTo: 'https://xxxloveitxxx.github.io'
        }
      });
      console.log('Supabase initialized with redirect');
    }

    // Initialize auth listener
    function initAuthListener() {
      supabaseClient.auth.onAuthStateChange((event, session) => {
        if (event === 'SIGNED_IN') {
          showToast('Successfully signed in!', 'success');
          // You can redirect or update UI here
        }
      });
    }

    // Simple event tracker (beacon) - FIXED to use GET instead of POST
    function trackEvent(name, props = {}) {
      try {
        // Convert to query parameters for GET request
        const params = new URLSearchParams({ event: name, ts: new Date().toISOString(), ...props });
        const url = `https://tha-clone-of-admin.onrender.com/api/track?${params}`;
        
        // Use image beacon for GET requests
        const img = new Image(1, 1);
        img.src = url;
      } catch (e) {
        // ignore tracking errors
        console.warn('trackEvent error', e);
      }
    }

    // -----------------------------
    // Toast helper
    // -----------------------------
    function showToast(msg, type = 'info', timeout = 3500) {
      const el = document.getElementById('replyze-toast');
      if (!el) return alert(msg);
      el.textContent = msg;
      el.style.display = 'block';
      el.style.background = type === 'error' ? 'rgba(255,96,92,0.95)' : (type === 'success' ? 'rgba(0,202,78,0.95)' : 'rgba(10,25,47,0.95)');
      clearTimeout(el._t);
      el._t = setTimeout(() => { el.style.display = 'none'; }, timeout);
    }

    // -----------------------------
    // Mobile menu helper - FIXED
    // -----------------------------
    function toggleMobileMenu() {
      const mobileNav = document.getElementById('mobileNav');
      const mobileOverlay = document.getElementById('mobileOverlay');
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      
      mobileNav.classList.toggle('active');
      mobileOverlay.classList.toggle('active');
      
      const isExpanded = mobileNav.classList.contains('active');
      mobileMenuBtn.innerHTML = isExpanded ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>'; 
      mobileMenuBtn.setAttribute('aria-expanded', isExpanded);
      
      // Prevent body scrolling when menu is open
      document.body.style.overflow = isExpanded ? 'hidden' : '';
    }

    function closeMobileMenu() {
      const mobileNav = document.getElementById('mobileNav');
      const mobileOverlay = document.getElementById('mobileOverlay');
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      
      mobileNav.classList.remove('active');
      mobileOverlay.classList.remove('active');
      mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
      mobileMenuBtn.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = '';
    }

    // -----------------------------
    // Progress bar functionality
    // -----------------------------
    function initProgressBar() {
      const progressBar = document.getElementById('progressBar');
      window.addEventListener('scroll', () => {
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight - windowHeight;
        const scrollPosition = window.scrollY;
        const progress = (scrollPosition / documentHeight) * 100;
        progressBar.style.width = `${progress}%`;
      });
    }

    // -----------------------------
    // App initialization
    // -----------------------------
    function initializeApp() {
      initUI();
      initProgressBar();
      initRateLimiting();
      attachHandlers();
      checkForLeadIdAndPrefill();
      autoGenerateOnLoad();
      initAuthListener(); // Add auth listener
      trackEvent('landing_view', { path: location.pathname });
    }

    // Mobile menu UI - FIXED
    function initUI() {
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const mobileOverlay = document.getElementById('mobileOverlay');
      
      if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          toggleMobileMenu();
        });
      }
      
      if (mobileOverlay) {
        mobileOverlay.addEventListener('click', closeMobileMenu);
      }
      
      // Close mobile menu when clicking on links
      const mobileLinks = document.querySelectorAll('.mobile-nav a');
      mobileLinks.forEach(link => {
        link.addEventListener('click', closeMobileMenu);
      });
      
      // Close mobile menu on escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeMobileMenu();
        }
      });
    }

    // -----------------------------
    // Rate limiting: unlimited for session, cookie fallback
    // -----------------------------
    let aiCount = 3;
    let aiUnlimited = false;

    function setCookie(name, value, days) {
      let expires = '';
      if (days) { const date = new Date(); date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000)); expires = '; expires=' + date.toUTCString(); }
      document.cookie = name + '=' + (value || '') + expires + '; path=/; SameSite=Lax';
    }
    
    function getCookie(name) {
      const nameEQ = name + '='; const ca = document.cookie.split(';');
      for (let i = 0; i < ca.length; i++) { let c = ca[i]; while (c.charAt(0) === ' ') c = c.substring(1, c.length); if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length); }
      return null;
    }

    function initRateLimiting() {
      // If sessionStorage marks this as an unlimited session, give unlimited replies while the tab is open
      if (sessionStorage.getItem('replyze_unlimited_session')) {
        aiUnlimited = true;
      } else {
        // mark this session as unlimited once (first visit in tab)
        sessionStorage.setItem('replyze_unlimited_session', '1');
        aiUnlimited = true;
      }

      // Fall back to cookie-stored allowance for returning users (ignored while aiUnlimited true)
      const trialsCookie = getCookie('free_trials');
      if (trialsCookie) {
        try { const trials = JSON.parse(trialsCookie); if (typeof trials.ai === 'number') aiCount = trials.ai; } catch (e) {}
      }

      document.getElementById('ai-counter').textContent = aiUnlimited ? 'unlimited (this session)' : aiCount;
    }

    function updateTrialsCookie() {
      const trials = { ai: aiCount };
      setCookie('free_trials', JSON.stringify(trials), 7);
    }

      // -----------------------------
    // Generate response (calls your backend)
    // -----------------------------
    async function generateResponse() {
      const inputEl = document.getElementById('demo-input');
      const input = inputEl ? inputEl.value.trim() : '';
      const leadId = window.currentLeadId || null;
      const responseContainer = document.getElementById('response-container');
      const aiResponse = document.getElementById('ai-response');
      const generateBtn = document.getElementById('generate-btn');

      if (!input) { showToast('Please paste a lead message or use our example.', 'error'); return; }

      // If not unlimited, check count
      if (!aiUnlimited && aiCount <= 0) {
        showToast('No more free AI responses. Please sign up for a free trial.', 'error');
        document.querySelector('#trial').scrollIntoView({ behavior: 'smooth' });
        return;
      }

      // If not unlimited, decrement
      if (!aiUnlimited && typeof aiCount === 'number') { aiCount--; updateTrialsCookie(); document.getElementById('ai-counter').textContent = aiCount; }

      // Show loading state
      if (generateBtn) { generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...'; generateBtn.disabled = true; }
      if (aiResponse) aiResponse.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating your response...';
      if (responseContainer) responseContainer.style.display = 'block';

      trackEvent('generate_clicked', { lead_id: leadId });

      try {
        // Call the actual API endpoint with CORS mode
        const response = await fetch('https://tha-clone-of-admin.onrender.com/api/generate-reply-prompt', {
          method: 'POST',
          mode: 'cors',
          headers: {
            'Content-Type': 'application/json',
            'Origin': 'https://xxxloveitxxx.github.io'
          },
          body: JSON.stringify({ prompt: input })
        });

        if (!response.ok) {
          throw new Error(`API error: ${response.status}`);
        }

        const data = await response.json();
        
        // Display the AI-generated response
        aiResponse.textContent = data.reply;

        // record usage if needed
        if (leadId) { 
          fetch('https://tha-clone-of-admin.onrender.com/api/record-ai-usage', { 
            method: 'POST', 
            mode: 'cors',
            headers: { 
              'Content-Type': 'application/json',
              'Origin': 'https://xxxloveitxxx.github.io'
            }, 
            body: JSON.stringify({ lead_id: leadId }) 
          }).catch(() => {}); 
        }

        trackEvent('response_viewed', { lead_id: leadId });
        
        if (generateBtn) { generateBtn.innerHTML = '<i class="fas fa-robot"></i> Generate AI Response'; generateBtn.disabled = false; }
        if (responseContainer) responseContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // If a non-unlimited session and aiCount hits 0, nudge to signup
        if (!aiUnlimited && aiCount === 0) {
          setTimeout(() => { 
            showToast("You've used your free AI responses! Start your free trial for unlimited access.", 'info'); 
            document.querySelector('#trial').scrollIntoView({ behavior: 'smooth' }); 
          }, 900);
        }
      } catch (err) {
        console.error('API call failed:', err);
        // Fallback to mock response if API fails
        const sampleResponses = [
          "Hi Jennifer! Thanks for reaching out about our open house at 123 Elm St. Yes, it's still happening this Sunday from 1-4 PM. Would you like me to save you a spot or would a different time work better for you?",
          "Hello Jennifer! The open house at 123 Elm St is definitely still on for Sunday from 1-4 PM. We'd love to have you stop by. Is there a particular time that works best for you so I can make sure to greet you personally?",
          "Hi there Jennifer! Yes, our open house at 123 Elm St is happening this Sunday from 1-4 PM. I'd be happy to answer any questions you have about the property. What time were you thinking of coming by?"
        ];
        
        const randomResponse = sampleResponses[Math.floor(Math.random() * sampleResponses.length)];
        aiResponse.textContent = randomResponse;
        showToast('Using demo response (API unavailable)', 'error');
        
        if (generateBtn) { generateBtn.innerHTML = '<i class="fas fa-robot"></i> Generate AI Response'; generateBtn.disabled = false; }
        if (responseContainer) responseContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    // -----------------------------
    // Progressive copy: allow first copy, prompt signup on second
    // -----------------------------
    let copiedOnce = false;
    document.addEventListener('click', (e) => { if (e.target && e.target.id === 'copy-btn') copyResponse(); });

    function copyResponse() {
      const responseEl = document.getElementById('ai-response');
      if (!responseEl) return showToast('No response to copy.', 'error');
      const text = responseEl.textContent || '';
      if (!text.trim()) return showToast('No response to copy.', 'error');

      navigator.clipboard.writeText(text).then(() => {
        if (!copiedOnce) {
          copiedOnce = true;
          showToast('Response copied — try it with a live lead. Want unlimited replies? Start the 30-day trial (no CC).', 'success', 5000);
        } else {
          // second copy intent: ask for signup
          document.querySelector('#trial').scrollIntoView({ behavior: 'smooth' });
          showToast('Almost there — enter your email to start your free trial.', 'info', 4000);
        }
      }).catch((err) => { console.error(err); showToast('Unable to copy. Select and copy manually.', 'error'); });
    }

    // -----------------------------
    // Signup (magic link via Supabase OTP)
    // -----------------------------
    document.addEventListener('submit', async (e) => {
      if (e.target && e.target.id === 'trial-form') {
        e.preventDefault();
        const email = document.getElementById('email').value.trim();
        const name = document.getElementById('name').value.trim();
        const btn = document.getElementById('signup-button');
        const formMessage = document.getElementById('form-message');
        const original = btn.innerHTML;
        
        if (!email) { 
          formMessage.textContent = 'Please enter your email address';
          formMessage.className = 'form-message error';
          formMessage.style.display = 'block';
          return; 
        }

        btn.disabled = true; 
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending link...';
        
        try {
          // Use the correct signInWithOtp method with proper options
          const { data, error } = await supabaseClient.auth.signInWithOtp({ 
            email,
            options: {
              emailRedirectTo: 'https://xxxloveitxxx.github.io',
              data: {
                name: name || '',
                user_type: 'agent'
              }
            }
          });
          
          if (error) throw error;
          
          formMessage.textContent = 'Magic link sent! Check your email to finish signup.';
          formMessage.className = 'form-message success';
          formMessage.style.display = 'block';
          
          showToast('Magic link sent — check your email to finish signup', 'success', 6000);
          
          // Reset form
          document.getElementById('trial-form').reset();
          
        } catch (err) {
          console.error(err);
          formMessage.textContent = err.message || 'Signup failed. Please try again.';
          formMessage.className = 'form-message error';
          formMessage.style.display = 'block';
          showToast(err.message || 'Signup failed', 'error', 5000);
        } finally { 
          btn.disabled = false; 
          btn.innerHTML = original; 
        }
      }

      // email modal submit (script download)
      if (e.target && e.target.id === 'email-form') {
        e.preventDefault();
        const email = document.getElementById('modal-email').value.trim();
        if (!email) return showToast('Enter a valid email', 'error');
        
        // Create and trigger download
        const scriptContent = `Two-Line RSVP Script Guide\n\nPrimary Script:\n\"Hi [Name], thanks for your interest in our open house at [Address] this weekend! We'd love to have you. Please let us know what time works best for you, and we'll send over all the details. Looking forward to meeting you!\"\n\nTips:\n- Personalize with the property address\n- Send within 1 hour of lead inquiry\n- Include specific time options when possible`;
        const blob = new Blob([scriptContent], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a'); 
        a.href = url; 
        a.download = 'ReplyzeAI-Two-Line-RSVP-Script.txt'; 
        document.body.appendChild(a); 
        a.click(); 
        a.remove(); 
        window.URL.revokeObjectURL(url);
        
        closeModal();
        showToast('Script downloaded — check your downloads folder', 'success');
      }
    });

    function closeModal() { document.getElementById('email-modal').style.display = 'none'; }

    // -----------------------------
    // Prefill demo from lead_id
    // -----------------------------
    function checkForLeadIdAndPrefill() {
      const urlParams = new URLSearchParams(window.location.search);
      const leadId = urlParams.get('lead_id');
      if (leadId) {
        window.currentLeadId = leadId;
        // Fetch lead details and prefill demo input
        fetch(`https://your-api-endpoint.com/api/leads/${leadId}`)
          .then(r => r.json())
          .then(data => {
            if (data && data.lead) {
              const msg = data.lead.message || data.lead.text || `Hi, I saw your sign at ${data.lead.address || 'the listing'}. Is the open house still on?`;
              const el = document.getElementById('demo-input'); 
              if (el) el.value = msg;
            }
          })
          .catch(() => {});
      }
    }

    // -----------------------------
    // Auto-generate on load once per session or when lead_id present
    // -----------------------------
    function autoGenerateOnLoad() {
      const urlParams = new URLSearchParams(window.location.search);
      const leadId = urlParams.get('lead_id');
      const already = sessionStorage.getItem('replyze_auto_generated');
      if (leadId || !already) {
        setTimeout(() => { 
          if (typeof generateResponse === 'function') generateResponse(); 
          sessionStorage.setItem('replyze_auto_generated', '1'); 
        }, 500);
      }
    }

    // -----------------------------
    // Attach button handlers
    // -----------------------------
    function attachHandlers() {
      const gb = document.getElementById('generate-btn'); 
      if (gb) gb.addEventListener('click', () => { generateResponse(); });
      
      // close modal when clicking outside
      window.onclick = function(event) { 
        const modal = document.getElementById('email-modal'); 
        if (event.target == modal) closeModal(); 
      };
    }

 
    // -----------------------------
    // Start
    // -----------------------------
    document.addEventListener('DOMContentLoaded', () => {
      initializeSupabase(); // Initialize Supabase first
      initializeApp(); // Then initialize the app
    });
  </script>

  <!-- Tracking helper and hidden lead-id field -->
  <input type="hidden" id="lead-id" name="lead_id">
</body>
</html>
